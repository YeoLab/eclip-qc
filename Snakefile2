configfile: "config.yaml"

import os

SAMPLESPATH = config["SAMPLESPATH"]
SOURCE = os.path.dirname(SAMPLESPATH[0])
d = {}
SAMPLES = []
for eachSample in SAMPLESPATH:
    basename = os.path.basename(eachSample)
    newBase = basename.replace('.genome-mapped.bam', '')
    SAMPLES.append(newBase)
    d[newBase] = eachSample
    
rule all:
    input:
        expand(os.path.join("pieChart", "{sample}" + ".png"), sample=list(d.keys()))       

rule unmapped_pie_blastx:
    input:
        "unmapped_counts/{SAMPLES}_unmappedblast_downsampled_blastx.tsv"
    output:
        "pieChart/{SAMPLES}.png"
    conda:
        "envs/python3.yaml"
    shell:
        "python3 script/blastxresults_piechart.py {input} {output}"
